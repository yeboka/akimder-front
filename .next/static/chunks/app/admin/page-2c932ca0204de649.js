(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3],{696:function(e,t,a){Promise.resolve().then(a.bind(a,6062))},6062:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return E}});var l=a(7437),s=a(2265),i=a(7527),n=a(8434),r=a(6183),d=a(428),c=a(1923),o=a(623),m=a(5491),u=a(7466),x=a(3142),h=a(5706),b=a(476),k=e=>{let{setSelectedAkimat:t,setIsFormOpen:a}=e,[i,n]=(0,s.useState)([]),[r,d]=(0,s.useState)(!0),c=async()=>{try{let e=(await b.Z.get("/akimat")).data.map(e=>({key:e.id.toString(),title:e.title,description:e.description,email:e.email,contacts:e.contacts}));n(e)}catch(e){console.error("Error fetching data:",e)}finally{d(!1)}},o=[{title:"Название",dataIndex:"title",key:"title"},{title:"Email",dataIndex:"email",key:"email"},{title:"Контакты",dataIndex:"contacts",key:"contacts"},{title:"Действия",key:"action",render:e=>(0,l.jsxs)(x.Z,{size:"middle",children:[(0,l.jsx)("a",{onClick:()=>{t(e),a(!0)},children:"Изменить"}),(0,l.jsx)("a",{onClick:()=>{b.Z.delete("/akimat/".concat(e.key)).then(c)},children:"Удалить"})]})}];return(0,s.useEffect)(()=>{c()},[]),(0,l.jsx)(h.Z,{columns:o,dataSource:i,loading:r})},j=a(4713),y=e=>{let{setSelectedNews:t,setIsFormOpen:a}=e,[i,n]=(0,s.useState)([]),[r,d]=(0,s.useState)(!0),c=async()=>{try{let e=(await b.Z.get("/news")).data.map(e=>({key:e.id.toString(),title:e.title,text:e.text,akimatName:e.akimatName,view_count:e.view_count,createdAt:e.createdAt}));n(e)}catch(e){console.error("Error fetching data:",e)}finally{d(!1)}},o=[{title:"Название",dataIndex:"title",key:"title"},{title:"Акимат",dataIndex:"akimatName",key:"akimatName"},{title:"Просмотры",dataIndex:"view_count",key:"view_count"},{title:"Действия",key:"action",render:e=>(0,l.jsxs)(x.Z,{size:"middle",children:[(0,l.jsx)("a",{onClick:()=>{t(e),a(!0)},children:"Изменить"}),(0,l.jsx)("a",{onClick:()=>{b.Z.delete("/news/".concat(e.key)).then(c)},children:"Удалить"})]})}];return(0,s.useEffect)(()=>{c()},[]),(0,l.jsx)(h.Z,{columns:o,dataSource:i,loading:r})},p=e=>{let{setIsFormOpen:t,news:a}=e,[i,n]=(0,s.useState)({akimat_id:0,title_ru:"",title_kk:"",title_en:"",text_ru:"",text_kk:"",text_en:"",image_url:""}),[r,d]=(0,s.useState)(""),[c,o]=(0,s.useState)(!1),[m,u]=(0,s.useState)([]);(0,s.useEffect)(()=>{(async()=>{try{let e=await b.Z.get("/akimat");u(e.data)}catch(e){console.error("Error fetching akimat options:",e)}})(),a&&b.Z.get("/news/".concat(a.key)).then(e=>n(e.data)).catch(e=>{console.error("Error fetching news:",e),d("Не удалось загрузить данные.")})},[a]);let x=e=>{let{name:t,value:a}=e.target;n(e=>({...e,[t]:a}))},h=async e=>{e.preventDefault(),o(!0),d("");try{if(a){let e=await b.Z.put("/news/".concat(a.key),i);200===e.status&&(d("Новость успешно обновлена!"),t(!1))}else{let e=await b.Z.post("/news",i);201===e.status&&(d("Новость успешно создана!"),n({akimat_id:0,title_ru:"",title_kk:"",title_en:"",text_ru:"",text_kk:"",text_en:"",image_url:""}),t(!1))}}catch(e){e.response?d("Ошибка: ".concat(e.response.data.message||"Не удалось отправить данные.")):d("Произошла ошибка сети. Попробуйте снова.")}finally{o(!1)}};return(0,l.jsxs)("div",{children:[(0,l.jsxs)("form",{onSubmit:h,className:"space-y-4",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Название (RU)"}),(0,l.jsx)("input",{type:"text",name:"title_ru",value:i.title_ru,onChange:x,className:"border rounded-md border-gray-300 p-2 w-full"})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Атауы (KK)"}),(0,l.jsx)("input",{type:"text",name:"title_kk",value:i.title_kk,onChange:x,className:"border rounded-md border-gray-300 p-2 w-full"})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Title (EN)"}),(0,l.jsx)("input",{type:"text",name:"title_en",value:i.title_en,onChange:x,className:"border rounded-md border-gray-300 p-2 w-full"})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Текст (RU)"}),(0,l.jsx)("textarea",{name:"text_ru",value:i.text_ru,onChange:x,className:"border rounded-md border-gray-300 p-2 w-full"})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Мәтін (KK)"}),(0,l.jsx)("textarea",{name:"text_kk",value:i.text_kk,onChange:x,className:"border rounded-md border-gray-300 p-2 w-full"})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Text (EN)"}),(0,l.jsx)("textarea",{name:"text_en",value:i.text_en,onChange:x,className:"border rounded-md border-gray-300 p-2 w-full"})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Akimat"}),(0,l.jsxs)("select",{name:"akimat_id",value:i.akimat_id,onChange:x,className:"border rounded-md border-gray-300 p-2 w-full",children:[(0,l.jsx)("option",{value:0,disabled:!0,children:"Выберите Akimat"}),m.map(e=>(0,l.jsx)("option",{value:e.id,children:e.title},e.id))]})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Ссылка на изображение"}),(0,l.jsx)("input",{type:"text",name:"image_url",value:i.image_url,onChange:x,className:"border rounded-md border-gray-300 p-2 w-full"})]}),(0,l.jsx)("button",{type:"submit",disabled:c,className:"bg-blue-500 text-white py-2 px-4 rounded hover:bg-blue-600 disabled:bg-gray-400",children:a?c?"Обновляем...":"Обновить":c?"Создаем...":"Создать"}),(0,l.jsx)("button",{type:"button",onClick:()=>t(!1),disabled:c,className:"bg-gray-500 text-white py-2 px-4 rounded hover:bg-gray-600 disabled:bg-gray-400 ml-4",children:"Назад"})]}),r&&(0,l.jsx)("p",{className:"mt-4 text-red-500",children:r})]})},f=a(756),g=a(9376),v=e=>{let{setSelectedAdvertisement:t,setIsFormOpen:a}=e,[i,n]=(0,s.useState)([]),[r,d]=(0,s.useState)(!0),c=async()=>{try{let e=(await b.Z.get("/advertisement")).data.map(e=>({key:e.id.toString(),image_url:e.image_url,link:e.link,description:e.description||"Нет описания",is_active:e.is_active}));n(e)}catch(e){console.error("Error fetching data:",e)}finally{d(!1)}},o=[{title:"Изображение",dataIndex:"image_url",key:"image_url",render:e=>(0,l.jsx)("img",{src:e,alt:"Advertisement",width:50})},{title:"Ссылка",dataIndex:"link",key:"link"},{title:"Описание",dataIndex:"description",key:"description"},{title:"Статус",dataIndex:"is_active",key:"is_active",render:e=>e?"Активно":"Неактивно"},{title:"Действия",key:"action",render:e=>(0,l.jsxs)(x.Z,{size:"middle",children:[(0,l.jsx)("a",{onClick:()=>{t(e),a(!0)},children:"Изменить"}),(0,l.jsx)("a",{onClick:()=>{b.Z.delete("/advertisements/".concat(e.key)).then(c)},children:"Удалить"})]})}];return(0,s.useEffect)(()=>{c()},[]),(0,l.jsx)(h.Z,{columns:o,dataSource:i,loading:r})},_=a(3709),N=e=>{let{setIsFormOpen:t,advertisement:a}=e,[i,n]=(0,s.useState)({image_url:"",link:"",description:"",is_active:!0}),[r,d]=(0,s.useState)(""),[c,o]=(0,s.useState)(!1);(0,s.useEffect)(()=>{a&&b.Z.get("/advertisement/".concat(a.key)).then(e=>{n(e.data)})},[a]);let m=e=>{let{name:t,value:a}=e.target;n(e=>({...e,[t]:a}))},u=async e=>{if(e.preventDefault(),!i.image_url||!i.link){d("Пожалуйста, заполните обязательные поля.");return}o(!0),d("");try{a?(await b.Z.put("/advertisement/".concat(a.key),i),d("Реклама успешно обновлена!")):(await b.Z.post("/advertisement",i),d("Реклама успешно создана!")),t(!1)}catch(e){e.response?d("Ошибка: ".concat(e.response.data.message||"Не удалось отправить данные")):d("Произошла ошибка сети. Попробуйте снова.")}finally{o(!1)}};return(0,l.jsx)("div",{className:"",children:(0,l.jsxs)("form",{onSubmit:u,className:"space-y-4",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium mb-1",children:"URL изображения"}),(0,l.jsx)("input",{type:"text",name:"image_url",value:i.image_url,onChange:m,className:"border rounded-md border-gray-300 p-2 w-full",required:!0})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Ссылка на продукт/событие"}),(0,l.jsx)("input",{type:"text",name:"link",value:i.link,onChange:m,className:"border rounded-md border-gray-300 p-2 w-full",required:!0})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Описание (необязательно)"}),(0,l.jsx)("textarea",{name:"description",value:i.description,onChange:m,className:"border rounded-md border-gray-300 p-2 w-full"})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Активна"}),(0,l.jsx)(_.Z,{checked:i.is_active,onChange:e=>{n(t=>({...t,is_active:e}))},className:"ml-2"})]}),(0,l.jsx)("div",{className:"mt-4",children:c?(0,l.jsx)("div",{className:"text-blue-500",children:"Отправка данных..."}):(0,l.jsxs)("div",{className:"flex gap-5",children:[(0,l.jsx)("button",{type:"submit",className:"bg-blue-500 text-white py-2 px-4 rounded-md hover:bg-blue-600 transition",children:"Сохранить"}),(0,l.jsx)("button",{onClick:()=>{n({image_url:"",link:"",description:"",is_active:!0}),t(!1)},className:"border-blue-500 border text-blue-500 py-2 px-4 rounded-md hover:bg-blue-100 transition",children:"Назад"})]})}),r&&(0,l.jsx)("div",{className:"mt-4 text-sm text-red-500",children:r})]})})};let{Title:w}=c.default,S=[{key:"1",icon:(0,l.jsx)(i.Z,{}),label:"Акиматы"},{key:"2",icon:(0,l.jsx)(n.Z,{}),label:"Новости"},{key:"4",icon:(0,l.jsx)(r.Z,{}),label:"Реклама"},{key:"3",icon:(0,l.jsx)(d.Z,{}),label:"Выйти"}],Z=()=>{let[e,t]=(0,s.useState)(!1),[a,i]=(0,s.useState)(null);return(0,l.jsxs)("div",{className:"flex flex-col flex-1 p-6",children:[(0,l.jsxs)("div",{className:"w-full flex justify-between items-center",children:[(0,l.jsx)(w,{level:2,children:"Акиматы"}),!e&&(0,l.jsx)(u.ZP,{type:"primary",onClick:()=>{t(!0)},children:"Добавить акимат"})]}),e?(0,l.jsx)(j.Z,{setIsFormOpen:t,akimat:a}):(0,l.jsx)(k,{setSelectedAkimat:i,setIsFormOpen:t})]})},C=()=>{let[e,t]=(0,s.useState)(!1),[a,i]=(0,s.useState)(null);return(0,l.jsxs)("div",{className:"flex flex-col flex-1 p-6",children:[(0,l.jsxs)("div",{className:"w-full flex justify-between items-center",children:[(0,l.jsx)(w,{level:2,children:"Реклама"}),!e&&(0,l.jsx)(u.ZP,{type:"primary",onClick:()=>{t(!0)},children:"Добавить рекламу"})]}),e?(0,l.jsx)(N,{setIsFormOpen:t,advertisement:a}):(0,l.jsx)(v,{setSelectedAdvertisement:i,setIsFormOpen:t})]})},I=()=>{let[e,t]=(0,s.useState)(!1),[a,i]=(0,s.useState)(null);return(0,l.jsxs)("div",{className:"flex flex-col flex-1 p-6",children:[(0,l.jsxs)("div",{className:"w-full flex justify-between items-center",children:[(0,l.jsx)(w,{level:2,children:"Новости"}),(0,l.jsx)(u.ZP,{type:"primary",onClick:()=>t(!0),children:"Добавить новость"})]}),e?(0,l.jsx)(p,{setIsFormOpen:t,news:a}):(0,l.jsx)(y,{setSelectedNews:i,setIsFormOpen:t})]})};var E=()=>{let[e,t]=(0,s.useState)("1"),[a,i]=(0,s.useState)(!1),n=(0,g.useRouter)();return(0,l.jsxs)(f.Z,{className:"bg-gray-100",children:[(0,l.jsxs)("div",{className:"min-h-[97vh] w-full flex bg-gray-100",children:[(0,l.jsx)(o.Z,{style:{width:256},selectedKeys:[e],onClick:e=>{if(3==e.key){i(!0);return}t(e.key)},items:S}),"1"===e&&(0,l.jsx)(Z,{}),"2"===e&&(0,l.jsx)(I,{}),"4"===e&&(0,l.jsx)(C,{})]}),(0,l.jsx)(m.Z,{title:"Выход",open:a,onOk:()=>{localStorage.removeItem("access_token"),localStorage.removeItem("refresh_token"),n.push("/")},okText:"Да",cancelText:"Назад",onCancel:()=>{i(!1)},children:(0,l.jsx)("p",{children:"Вы уверены что хотите выйти?"})})]})}}},function(e){e.O(0,[464,881,315,891,656,807,971,117,744],function(){return e(e.s=696)}),_N_E=e.O()}]);